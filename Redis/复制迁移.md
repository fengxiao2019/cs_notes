为了提高系统的可用性，Redis Cluster实现了一个叫做复制迁移的概念。这个想法是，在一个有主从设置的集群中，如果从属和主站之间的映射是固定的，那么在单个节点发生多个独立故障时，可用性是有限的。

例如，在一个每个主节点都有一个从节点的集群中，只要主节点或从节点发生故障，集群就可以继续运行，但如果两个节点同时发生故障，就不能继续运行。然而，有一类故障是由硬件或软件问题引起的单个节点的独立故障，这些故障会随着时间的推移而累积。比如说。

主站A有一个单一的从站A1。
主站A发生故障。A1被提升为新的主站。
三小时后，A1以一种独立的方式失败（与A的失败无关）。由于节点A仍处于故障状态，没有其他从属设备可供推广。集群无法继续正常运行。
如果主站和从站之间的映射是固定的，那么使集群对上述情况更有抵抗力的唯一方法是为每个主站增加从站，然而这代价很高，因为它需要更多的Redis实例被执行，更多的内存，等等。

另一种方法是在集群中创建一个不对称性，让集群的布局随着时间的推移自动改变。例如，集群可能有三个主站A、B、C。A和B各有一个从站，即A1和B1。然而主站C则不同，它有两个从站。C1和C2。

复制迁移是自动重新配置从机的过程，以便迁移到一个不再有覆盖面的主站（没有工作的从机）。通过复制迁移，上面提到的情况变成了下面的情况。

主站A发生故障。A1被提升。
C2作为A1的从站迁移，否则没有任何从站的支持。
三小时后，A1也发生故障。
C2被提升为新的主站，取代A1。
集群可以继续运行。

复制迁移算法
迁移算法不使用任何形式的协议，因为Redis集群中的从属布局不是集群配置的一部分，需要与配置纪元保持一致和/或版本。相反，它使用一种算法来避免在没有主站支持的情况下大规模迁移从站。该算法保证最终（一旦集群配置稳定）每个主站都会被至少一个从站支持。

这就是该算法的工作原理。首先，我们需要定义在这种情况下什么是好的从机：一个好的从机是一个从机，从给定节点的角度来看，不处于FAIL状态。

每一个检测到至少有一个没有好Replica的主站的从站都会触发算法的执行。然而，在所有检测到这种情况的从站中，只有一个子集应该采取行动。这个子集实际上通常是一个从属机构，除非不同的从属机构在某一时刻对其他节点的故障状态有稍微不同的看法。

采取行动的从属设备是拥有最大数量的连接从属设备的主设备，它不处于故障状态，并且拥有最小的节点ID。

因此，举例来说，如果有10个主站，每个主站有1个从站，还有2个主站，每个主站有5个从站，那么将尝试迁移的从站是--在有5个从站的2个主站中，节点ID最小的那个。鉴于没有使用协议，当集群配置不稳定时，有可能出现一个竞赛条件，即多个从属机认为自己是节点ID较低的非故障从属机（这在实践中不太可能发生）。如果这种情况发生，其结果是多个从站迁移到同一个主站，这是无害的。如果竞赛发生的方式会让出让者 