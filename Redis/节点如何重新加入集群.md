
当一个节点重新加入集群时，同样的基本机制被使用。继续上面的例子，节点A将被通知，哈希槽1和2现在由B提供服务。假设这两个是A提供的唯一的哈希槽，A提供的哈希槽的数量将下降到0! 因此，A将重新配置为新主站的一个从站。

实际遵循的规则比这更复杂一些。一般来说，可能会发生A在很长时间后重新加入的情况，与此同时，可能会发生原来由A服务的哈希槽被多个节点服务的情况，例如哈希槽1可能由B服务，而哈希槽2由C服务。

所以实际的Redis集群节点角色切换规则是。一个主节点将改变其配置，以复制（成为）**窃取其最后一个哈希槽的节点的replica**。

在重新配置过程中，最终服务的哈希槽的数量将下降到零，节点将相应地重新配置。请注意，在基本情况下，这只是意味着旧的主站将成为故障切换后取代它的从站的replica。然而在一般形式下，该规则涵盖了所有可能的情况。

从机的做法完全相同：它们重新配置，以复制抢走其前主机最后一个哈希槽的节点。